import { QdrantClient } from '@qdrant/js-client-rest';
import { QDRANT_URL, QDRANT_API_KEY } from './config.js';
let qdrantClientInstance = null;
/**
 * Initializes and returns a singleton Qdrant client instance.
 * Throws an error if QDRANT_URL is not configured.
 */
export function getQdrantClient() {
    if (!QDRANT_URL) {
        throw new Error('QDRANT_URL environment variable is not set. Qdrant client cannot be initialized.');
    }
    if (!qdrantClientInstance) {
        console.error(`[${new Date().toISOString()}] Initializing Qdrant client for URL: ${QDRANT_URL}`);
        qdrantClientInstance = new QdrantClient({
            url: QDRANT_URL,
            apiKey: QDRANT_API_KEY, // Pass API key if provided (can be undefined)
        });
    }
    return qdrantClientInstance;
}
/**
 * Checks if the Qdrant configuration is available.
 */
export function isQdrantConfigured() {
    return !!QDRANT_URL;
}
